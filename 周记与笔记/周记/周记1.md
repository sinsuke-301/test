# 本周目标：

<font color=#999AAA >1.完成部分静态页面
2.学习ajax和github的操作
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 学习过程的记录：

<font color=#ff7b3f >1.ajax开始需要注意的问题

初始化：`npm init --yes`
开始使用ajax时需要安装express： `npm i express`

<font color=#ff7b3f >2.express的基本使用

```javascript
//1.引入express
const express = require('express');

//2.创建应用对象
const app = express();

//3.创建路由规则
//request 是对请求报文的封装
//response 是对响应报文的封装
app.get('/', (request, response) => {
    //设置响应
    response.send('HELLO EXPRESS');
});

//4。监听端口启动服务
app.listen(8000, () => {
    console.log("服务已经启动，8000端口监听中......");
});
```
<font color=#ff7b3f >注意：当修改完js代码时，需要重新启动服务端口。

<font color=#ff7b3f >3.点击按钮发送请求

```javascript
<script>
      //获取button元素
      const btn = document.getElementsByTagName('button')[0];
      const result = document.getElementById("result");
      //绑定事件
      btn.onclick = function () {
      //1.创建对象
      const xhr = new XMLHttpRequest();
      //2.初始化 设置请求方法和url
       xhr.open('GET', 'http://127.0.0.1:8080/server?a=100&b=200&c=300');//设置请求参数(以？作为分割)
       //3.发送
       xhr.send();
       //4.事件绑定 处理服务器返回的结果
       //on when 当。。。的时候
       //readystate 是xhr对象中的属性，表示状态0 1 2 3 4
       //change 改变
       xhr.onreadystatechange = function () {
           //判断（服务器返回了所有的结果）
           if (xhr.readyState === 4) {
               //判断响应状态码 200 404 403 401 500
               //2xx 成功
               if (xhr.status >= 200 && xhr.status < 300) {
                   //处理结果 行 头 空行 体
                   //1.响应体
                   console.log(xhr.status);//状态码
                   console.log(xhr.statusText);//状态字符串
                   console.log(xhr.getAllResponseHeaders());//所有响应头
                   console.log(xhr.response);//响应体
                   //设置result 的文本
                   result.innerHTML = xhr.response;
               } else {
             }
          }
       }
     }
    </script>
```
<font color=#ff7b3f >4.POST

```javascript
<script>
        //获取元素对象
        const result = document.getElementById("result");
        //绑定事件
        result.addEventListener("mouseover", function () {
            //1.创建对象
            const xhr = new XMLHttpRequest();
            //2.初始化 设置类型与url
            xhr.open('POST', 'http://127.0.0.1:8080/server');
            //设置请求头
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            //Content-Type 设置请求头类型
            xhr.setRequestHeader('name', 'atguigu');
            //name为自定义请求头，会报错
            //3.发送
            // xhr.send('a=100&b=200&c=300');
            // xhr.send('a:100&b:200&c:300');
            xhr.send('1234567');
            //4.事件绑定
            xhr.onreadystatechange = function () {
                //判断
                if (xhr.readyState === 4) {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        //处理服务器返回的结果
                        result.innerHTML = xhr.response;
                    }
                }
            }
        })
    </script>
```
<font color=#ff7b3f >5.服务端响应json数据

```javascript
<script>
        const result = document.getElementById('result');
        //绑定键盘按下事件
        window.onkeydown = function () {
            //发送请求
            const xhr = new XMLHttpRequest();
            //设置响应体数据的类型 方法2
            xhr.responseType = 'json';
            //初始化
            xhr.open('GET', 'http://127.0.0.1:8080/json-server');
            //发送
            xhr.send();
            //事件绑定
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        // console.log(xhr.response);
                        // result.innerHTML = xhr.response;
                        //1.手动对数据转化
                        //let data = JSON.parse(xhr.response);
                        //console.log(data);
                        //result.innerHTML = data.name;无需data转化
                        //2.自动转换
                        console.log(xhr.response);
                        result.innerHTML = xhr.response.name;
                    }
                }
            }
        }
    </script>
```
基础的server js文件内容（在原express基本操作文件中加以修改）

```javascript
//1.引入express
const express = require('express');

//2.创建应用对象
const app = express();

//3.创建路由规则
//request 是对请求报文的封装
//response 是对响应报文的封装
app.get('/server', (request, response) => {
    //设置响应头 设置允许跨域
    response.setHeader('Access-Control-Allow-Origin', '*');
    //设置响应体
    response.send('HELLO AJAX');
});
//可以接受任意类型的请求
app.all('/server', (request, response) => {
    //设置响应头 设置允许跨域
    response.setHeader('Access-Control-Allow-Origin', '*');
    //设置响应体
    response.setHeader('Access-Control-Allow-Headers', '*');
    //这里表示所有类型的头信息可接受
    response.send('HELLO AJAX post');
});
app.all('/json-server', (request, response) => {
    //设置响应头 设置允许跨域
    response.setHeader('Access-Control-Allow-Origin', '*');
    //设置响应体
    response.setHeader('Access-Control-Allow-Headers', '*');
    //这里表示所有类型的头信息可接受
    //相应一个数据
    const data = {
        name: 'atguigu'
    };
    //对对象进行字符串转换
    let str = JSON.stringify(data);
    //设置响应体
    response.send(str);
});

//4。监听端口启动服务
app.listen(8080, () => {
    console.log("服务已经启动，8080端口监听中......");
});
//注意：这里设置的8000端口在原先被占用，需要关闭服务
//js 修改完代码后需要重新启动服务
```


<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 心得感想：
感觉二轮考核的难度比一轮考核的难度加大了许多，仍要学习的东西还有很多，近期学习了ajax的一部分操作，学的云里雾里，估计是还没有进行相对具体的实操，对其具体的功能还没有足够熟悉的了解。同时还学习了github的操作，尽管是第一次接触但能感觉到其对代码的管理真的有很大的帮助，不仅能实现远程传输代码信息，还能保存原先发送过的代码，这样对后来查找历史代码有很大的便利。但学习这个也花了相当大的功夫，将本地文件git到GitHub远程仓库折腾了好久，推送过程中总是出现链接不到的问题，不过好在后来解决了不然真的崩溃。。。
这几周的任务安排比较多，要合理安排好时间（部门的活层出不穷。。。），在做静态页面的同时学习ajax的操作，同时了解一下有关升级需求的一些原理。下一周计划完成所有静态页面，尝试一下部分升级需求的功能。这几天的学习发现好像通过查找文案学习效率会比看视频的效率高，估计是查找文案更有针对性吧，但如果是学习从未了解过的可能看视频会更好一点。前几天看视频学习github的创建看的一脸懵逼，反而看文案熟悉更快省的时间更多。
