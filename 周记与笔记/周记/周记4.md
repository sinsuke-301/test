# 本周目标：

<font color=#999AAA >1.完成我的音乐大致布局
2.完成我喜欢的音乐，收藏歌单的大致页面布局
3.音乐播放器的大致实现
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 学习记录：

<font color=#ff7b3f >1.设置点击事件实现暂停、播放

```javascript
let play = document.getElementById('play');
let mym = document.getElementById('mym');
play.addEventListener('click', function () {
    if (mym.paused) {
        mym.play();
        this.innerHTML = "暂停";
    } else {
        mym.pause();
        this.innerHTML = "播放";
    }
});
```
<font color=#ff7b3f >2.点击音量条上的小图标实现静音控制以及音量条的控制

```javascript
let jy = document.getElementById('jy');
var voice_span = document.getElementById("voice_span");//拖动条
var voice_box = document.getElementById("voice_box");
var voice = document.getElementById("voice");//音量盒子
var P1 = document.getElementById("p1");//显示音量数值
voice_span.style.left = 60 + 'px';//默认初始状态
voice.style.width = 60 + 'px';
voice_span.onmousedown = function (e) {
    event.preventDefault(); // 阻止默认事件
    var evt = e || event;//考虑兼容性
    var x = evt.offsetX;
    voice_box.onmousemove = function (e) {
        event.preventDefault(); // 阻止默认事件
        var evt = e || event;
        voice_span.style.left = evt.clientX - voice_box.offsetLeft - x + "px";
        if (evt.clientX - voice_box.offsetLeft - x <= 0) {
            voice_span.style.left = "0px";
        }
        if (evt.clientX - voice_box.offsetLeft - x >= 120) {
            voice_span.style.left = "120px";
        }
        var voice_num = Math.floor(voice_span.offsetLeft / 1.2);
        P1.innerHTML = voice_num + '%';
        voice.style.width = voice_span.offsetLeft + "px";
        mym.volume = voice_num / 100;
        //console.log(mym.volume);
    }
    document.onmouseup = function () {
        voice_box.onmousemove = null;
    }
}
```
<font color=#ff7b3f >3.获取歌曲的总时长，和歌曲播放进度

```javascript
// 总时长
mym.addEventListener("loadedmetadata", function () {
    let hour = Math.floor(mym.duration / 3600);
    let other = mym.duration % 3600;
    let minute = Math.floor(other / 60);
    let second = Math.floor(other % 60);
    (hour < 10) && (hour = "0" + hour);
    (minute < 10) && (minute = "0" + minute);
    (second < 10) && (second = "0" + second);
    totalTime.innerHTML = minute + ':' + second;
})
// 当前播放进度，结合 timeupdate事件
mym.addEventListener("timeupdate", function () {
    let hour = Math.floor(mym.currentTime / 3600);
    let other = mym.currentTime % 3600;
    let minute = Math.floor(other / 60);
    let second = Math.floor(other % 60);
    (hour < 10) && (hour = "0" + hour);
    (minute < 10) && (minute = "0" + minute);
    (second < 10) && (second = "0" + second);
    current.innerHTML = minute + ':' + second;
    jindu_color.style.width = 100 * mym.currentTime / mym.duration + "%";
});
```
<font color=#ff7b3f >4.歌曲进度条的实现

```javascript
//进度条（快进、后退）
let jMove = function () {
    let x = event.offsetX;
    jindu_color.style.width = x + "px";
    mym.currentTime = "" + parseInt(x * mym.duration / 440) + "";
};
jindu_bg.addEventListener('mousedown', function () {
    let mouseX = event.offsetX;
    jindu_color.style.width = mouseX + "px";
    mym.currentTime = "" + parseInt(mouseX * mym.duration / 440) + "";
    jindu_bg.addEventListener("mousemove", jMove);
});
jindu_bg.addEventListener("mouseup", function () {
    jindu_bg.removeEventListener("mousemove", jMove);
});
jindu_bg.addEventListener("mouseleave", function () {
    jindu_bg.removeEventListener("mousemove", jMove);
});
```

<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 收获心得：

本周大致完成了‘我的音乐’页面的布局，‘我喜欢的音乐’通过api接口获取了前15首歌曲，收藏的歌单也通过api接口获得前六个。同时对于获取的15首我喜欢的音乐，能够实现点击跳转播放界面的功能，音乐播放目前实现播放暂停，调节音量，进度条随歌曲时间变化而变化，拉动进度条歌曲时间变化的功能。进一步熟悉了获取api接口的操作，在歌曲进度条这方面上花了较多的时间去琢磨，熟悉了其实现的原理和代码。但进度似乎还是有点慢，要完成最终预期的效果还是有很多地方需要加以完善：滚动歌词同步进度体的实现，滑动点击歌词使歌曲跳转到对应的时间（这两个要多研究一下！）；点击特定歌单导出其歌单的前十首歌，并同时实现点击播放的功能；实现退出播放界面（即跳转界面）音乐播放不中断，页面下端固定播放栏的效果；页面细节的完善（有些布局有点粗糙，适当添加图标，css样式）
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 下周计划：

1.歌词滚动同步歌曲和进度条的实现
2.歌曲的播放列表完成（增加删除歌曲）
3.完善页面细节布局
4.首页相关布局交互效果的实现
5。有时间的话实现一下导出歌曲评论，点赞，收藏歌曲的功能
