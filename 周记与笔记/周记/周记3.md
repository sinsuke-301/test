# 本周目标：

<font color=#999AAA >1.实现登录退出功能
2.搜索栏热门搜索以及关键字索引
3.修改整体布局，添加首页轮播图模块
4.修改html元素，实现歌单信息动态渲染
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 学习记录：

<font color=#ff7b3f >1.封装函数调用请求

```javascript
function search(address, callBack) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                callBack()
                //将请求结果存放到全局对象中
                res = JSON.parse(this.responseText).result.hots
                //获取热门搜索信息
            }
        };
        let url = baseUrl + address
        xhttp.open("GET", url, false);
        xhttp.send('{}');
    }
```
该例子实现的是热门搜索部分
```javascript
//设置一个存放搜索结果的数组
let res = []
```

```javascript
//调用函数发起请求
    search('/search/hot', post)
    console.log(res);
    //获取html的div元素
    let ul = document.getElementById('search_menu')
    var lis = ul.querySelectorAll('li');
    //动态渲染
    for (let i = 0; i < res.length - 5; i++) {
        //将其文本内容设置为对应的请求结果
        lis[i].innerText = i + 1 + '         ' + res[i].first
    }
```
在原先存在的li内动态渲染信息
<font color=#ff7b3f >2.关于实时监听输入框输入信息改变索引部分内容

```javascript
let sth = [];
    var search = document.querySelector('.search');
    var search_input = search.querySelector('input');
    search_input.oninput = function () {
        //div.innerHTML = input.value;
        if (search_input.value != '') {
            sth = search_input.value;
            search1(active_search + sth, post);
            //console.log(res.length);
            for (var i = 0; i < res.length - 1; i++) {
                //将其文本内容设置为对应的请求结果
                lis[i].innerText = i + 1 + '         ' + res[i].keyword;
            }
        }
    }
```
1.获取元素
2.添加输入框输入内容变化触发的函数：
每当输入框信息发生变化，便会触发函数，发送请求（根据关键词索引）
改变索引栏的信息，实现实时更新索引栏的功能。
<font color=#ff7b3f >3.页面动态渲染请求端口记录

```javascript
let baseUrl = 'https://autumnfish.cn/'
```
手机登录：

```javascript
'/login/cellphone?phone=xxx&password=yyy'
```
热门搜索部分

```javascript
'/search/hot'
```
关键词搜索建议部分

```javascript
'/search/suggest?keywords= 海阔天空&type=mobile'
```
新歌发布：信息动态渲染例子（利用for循环遍历）

```javascript
let newes = document.querySelectorAll('.newes');
let new_a = document.querySelectorAll('.new_a');
let new_p = document.querySelectorAll('.new_p');
let new_span = document.querySelectorAll('.new_span');
for (var i = 0; i < 54; i++) {
    newsongs('/album/new?area=KR&limit=54', post);
    console.log(album[i]);
    newes[i].src = album[i].blurPicUrl;
    new_a[i].innerHTML = album[i].name;
    new_p[i].innerHTML = album[i].artist.name;
}
```
注意获取不同元素时对应的后缀不同，可打开调试器调试查找相关信息。
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 本周总结：
  这一周花在研究api上的时间多了点，之前对其的了解不够深入。虽然花的时间多但还是受益匪浅的，弄明白接口的使用后在接下来有关搜索栏索引信息，登录的实现，歌单信息的动态渲染能够得心应手的实现。比起上一周来说还是好很多了，上一周的学习进度几乎为0.但整体进度还是有点慢了，下周加快脚步赶回来。
<hr style=" border:solid; width:100px; height:1px;" color=#000000 size=1">

# 下周计划：

<font color=#999AAA >1.完成个人用户界面（喜欢的歌曲导出）
2.歌曲播放的基本功能以及有关播放页面的布局实现
3.服务器部署
4.将代码推到github（还不是很熟悉使用）
